<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.laokou.auth.server.domain.sys.repository.mapper.SysMenuMapper">
    <select id="getPermissionsList" resultType="string" flushCache="true">
        SELECT permission FROM boot_sys_menu
        where del_flag = '0'
        GROUP BY permission
    </select>

    <select id="getPermissionsListByUserId" resultType="string" flushCache="true">
        SELECT boot_sys_menu.permission FROM boot_sys_menu
        ,boot_sys_role
        ,boot_sys_role_menu
        ,boot_sys_user
        ,boot_sys_user_role
        ,mysql.help_topic
        WHERE boot_sys_menu.id = boot_sys_role_menu.menu_id
        AND boot_sys_role_menu.role_id = boot_sys_role.id
        AND boot_sys_user.id = boot_sys_user_role.user_id
        AND boot_sys_role.id = boot_sys_user_role.role_id
        AND boot_sys_user.id = #{userId}
        and boot_sys_menu.del_flag = '0'
        GROUP BY boot_sys_menu.permission
    </select>

</mapper>
